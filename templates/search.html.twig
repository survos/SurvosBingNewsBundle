{% extends "base.html.twig" %}

{% block body %}

    {% if searchForm is defined %}
    {{ form(searchForm) }}
    {% endif %}

    {{ dump(news[0]|default('~')) }}

    {% set columns = [
        'image',
        'name',
        'description',
        {name: 'dump', condition: app.request.get('debug', false)},
    ] %}
    {% set articles = [] %}
    <twig:simple_datatables
            perPage="25"
            :caller="_self"
            :columns="columns"
            :data="news|default([])"
    >
        <twig:block name="image">
            {% if row.image %}
            <img src="{{ row.image.thumbnail().contentUrl() }}" alt="{{ row.id }}" style="max-width: 120px"/>
            {% endif %}
        </twig:block>
        <twig:block name="publishedAt">
            {% guard filter ago %}
                {{ row.datePublished|ago }}
            {% else %}
                install timeago!
                {{ row.datePublished }}
            {% endguard %}
        </twig:block>
        <twig:block name="dump">
            {% guard function dump %}
            {{ dump(row) }}
            {% else %}
                <pre>{{ row|json_encode }}</pre>
            {% endguard %}
        </twig:block>
        <twig:block name="name">
            <a href="{{ row.url }}" target="_blank">
                {{ row.name }}
            </a>
            <br />
{#            {{ row.description }}#}
            <hr />
{#            <span class="danger">{{ row.sectionId }}</span>#}
        </twig:block>

    </twig:simple_datatables>
{% endblock %}
